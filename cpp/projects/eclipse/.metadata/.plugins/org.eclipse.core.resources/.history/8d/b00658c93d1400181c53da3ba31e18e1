/*
 * FileHandler.cpp
 *
 *  Created on: Feb 17, 2018
 *      Author: mauricio
 */

#include "FileHandler.h"



FileHandler::FileHandler() {
	// TODO Auto-generated constructor stub

}

FileHandler::~FileHandler() {
	// TODO Auto-generated destructor stub
}

bool FileHandler::DirectoryExists(std::string filePath) {
	// Boost way
	bool result = boost::filesystem::exists(filePath);
	std::cout << "Result: " << result << std::endl;
	return result;
}

void FileHandler::CreateDirectory(std::string filePath) {
	// Boost way
	boost::filesystem::create_directory(filePath);
}

std::string FileHandler::JoinPath(std::string path1, std::string path2) {
	boost::filesystem::path pathBoost1 (path1);
	boost::filesystem::path pathBoost2 (path2);
	boost::filesystem::path full_path = pathBoost1 / pathBoost2;

	return full_path.string();
}

std::vector<std::string> FileHandler::ReadAllFiles(std::string dirPath) {
	std::vector<std::string> response;

	DIR *dir = opendir(dirPath.c_str());
	struct dirent *ent;
	if (dir != NULL) {
		/* print all the files and directories within directory */
		while ((ent = readdir (dir)) != NULL) {
			std::string str(ent->d_name);
			std::string fullPath = JoinPath(dirPath,str);

			struct stat buf;
			stat(fullPath.c_str(), &buf);
			if(S_ISREG(buf.st_mode) == false) {
				// IS FILE!
				response.push_back(fullPath);
			}
		}
		closedir (dir);
	} else {
		// Error directory does not exist, or cant open
	}

	return response;
}

std::string FileHandler::GetFileNameNoExtension(std::string fileName) {
	boost::filesystem::path p(fileName);
	return p.stem().string();
}

